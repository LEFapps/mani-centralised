Resources:
  CloudFrontDistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        Comment: ${self:custom.prefix}-client
        CustomErrorResponses:
          - ErrorCachingMinTTL: 0
            ErrorCode: 403
            ResponseCode: 200
            ResponsePagePath: "/index.html"
          - ErrorCachingMinTTL: 0
            ErrorCode: 404
            ResponseCode: 200
            ResponsePagePath: "/index.html"
        DefaultCacheBehavior:
          AllowedMethods:
            - GET
            - HEAD
          CachedMethods:
            - GET
            - HEAD
          Compress: true
          ForwardedValues:
            QueryString: false
          TargetOriginId: Client
          ViewerProtocolPolicy: "redirect-to-https"
        DefaultRootObject: "index.html"
        Enabled: true
        IPV6Enabled: true
        Origins:
          - Id: ${self:custom.prefix}-client-origin
            S3OriginConfig:
              OriginAccessIdentity: ''
            DomainName:
              Fn::Join:
                - ""
                - - Ref: ClientBucket
                  - ".s3."
                  - ${self:provider.region}
                  - ".amazonaws.com"
        PriceClass: PriceClass_100
